from flask import Flask, jsonify
import mysql.connector

app = Flask(__name__)

# Config to connect mariadb
db_config = {
    'host': '10.77.66.106',  # IP of host mariadb
    'user': 'remote_user',  # user of mariadb
    'password': 'StrongRemotePassword!',  # password of mariadb user
    'database': 'applicationdb',  # name of database
    'charset': 'utf8mb4'  # Set charset to ensure proper collation
}

@app.route('/')
def index():
    try:
        conn = mysql.connector.connect(**db_config)
        cursor = conn.cursor()
        cursor.execute('SELECT DATABASE();')
        db_name = cursor.fetchone()
        conn.close()
        return jsonify({"status": "connected", "database": db_name[0]})
    except Exception as e:
        return jsonify({"status": "error", "message": str(e)})

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, debug=True)

